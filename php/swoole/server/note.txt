1.swoole_server只能在cli模式下运行。

1、Master进程
保证swoole机制运行，同时利用它创建Master线程(主要负责接收连接、定时器等) 和Reactor线程(处理连接并把请求分发给各个Worker进程)

2、Manager进程
Worker进程和Task进程均由它的派生变成子进程，并负责结束时回收子进程，避免僵尸的存在。

3、Worker进程
利用PHP回调函数处理由Reactor分发过来的请求数据，生成响应数据，并发给Reactor线程，由Reactor线程发送给TCP客户端

4、Task进程
接收由Worker进程分发给它的任务，以多进程的方式运行。处理好后把结果返回给它的Worker进程


https://camo.githubusercontent.com/5d7808facc40cb47a23056827d38afa639d7b3ec/68747470733a2f2f692e696d6775722e636f6d2f675150747377462e706e67
主进程：这是执行PHP脚本时的原始进程。它会分叉一个主Reactor和一个Manager。它是整个应用程序的根进程。
主反应器：反应器在Swoole是multi-thread，完全asynchronous有实现的epollLinux内核或kqueue在OSX。Reactor负责接收连接的请求并交付给Manager进程。简单来说，它的功能就像Nginx Server一样。
Manager：Manager进程将分叉多个Worker进程。当任何Worker终止时，它将自动分叉另一个Worker进程以保持准确的Worker数量。
工人：这是你真正应该关心的地方。所有请求（主要逻辑）都将在Worker中处理。
任务工作者：与工作进程功能相同，但仅用于任务交付。工作人员可以异步地将任务交付给任务队列。任务工作者负责从此队列中消耗任务。

==================================================================================================
二.tcp服务器运行的两种模式：
多进程模式(默认)：
基本模式：


=====
查看swoole版本：php --info  或者    php -r "echo swoole_version();"


======
单词：
daemonize 守护进程
process   进程
thread    线程
multithread  多线程
master    主要的
manager  处理
reactor   反应器

进程：
进程是一个实体，每一个进程都有自己的地址空间：文本空间(text region)  数据空间(data region)  堆栈空间(stack region)
text region:存储执行代码的空间，即代码本身   
data region:存储变量和进程执行期间动态分配的内存
stack region:存储活动中调用的指令和本地变量(存储函数的参数或者局部变量) 
进程是没有生命的实体，只有处理器处理程序时才有生命，此时成为进程。
进程的三种状态：
就绪   运行    阻塞


线程：
一个进程包含若干个线程，线程可以使用进程所拥有的资源(text region,data region和stack region),

进程有独立空间，所以进程之间不会相互影响。
但是线程的没有独立空间，一个线程死掉，整个进程就会死掉。


进程线程的切换调度：


进程间通信；  https://blog.csdn.net/skyroben/article/details/71513385
管道(pipe):   每个进程各自有不同的用户地址空间,任何一个进程的全局变量在另一个进程中都看不到，所以进程之间要交换数据必须通过内核,在内核中开辟一块缓冲区,进程A把数据从用户空间拷到内核缓冲区,进程B再从内核缓冲区把数据读走,内核提供的这种机制称为进程间通信。

通讯流程：
（1）父进程创建管道，得到两个⽂件描述符指向管道的两端

（2）父进程fork出子进程，⼦进程也有两个⽂件描述符指向同⼀管道。

（3）父进程关闭fd[0],子进程关闭fd[1]，即⽗进程关闭管道读端,⼦进程关闭管道写端（因为管道只支持单向通信）。⽗进程可以往管道⾥写,⼦进程可以从管道⾥读,管道是⽤环形队列实现的,数据从写端流⼊从读端流出,这样就实现了进程间通信。 


通讯特点：
1.管道只允许具有血缘关系的进程间通信，如父子进程间的通信。
2.管道只允许单向通信。
3.管道内部保证同步机制，从而保证访问数据的一致性。
4.面向字节流
5.管道随进程，进程在管道在，进程消失管道对应的端口也关闭，两个进程都消失管道也消失。



socke 又称套接字

===========================





